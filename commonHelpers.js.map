{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function createMarkup(arr) {\n\n  return arr.hits\n    .map(({largeImageURL, \n      webformatURL, \n      tags, \n      likes, \n      views, \n      comments, \n      downloads}) => \n      `<div class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img \n          class=\"gallery-image\" \n          src=\"${webformatURL}\" \n          alt=\"${tags}\" \n          />\n      </a>\n      <div class=\"gallery-info\">\n          <p class=\"gallery-info-par\">\n              <span class=\"gallery-info-span\">Likes: <span class=\"tag-span\">${likes}</span>\n              </span>    \n          </p>\n          <p class=\"gallery-info-par\">\n              <span class=\"gallery-info-span\">Views: <span class=\"tag-span\">${views}</span>\n              </span>    \n          </p>\n          <p class=\"gallery-info-par\">\n              <span class=\"gallery-info-span\">Comments: <span class=\"tag-span\">${comments}</span>\n              </span>    \n          </p>\n          <p class=\"gallery-info-par\">\n              <span class=\"gallery-info-span\">Downloads: <span class=\"tag-span\">${downloads}</span>\n              </span>    \n          </p>\n      </div>\n  </div>`\n    )\n    .join('');\n}\n\nexport function showEndOfListMessage() {\n    iziToast.show({\n      title: 'Info',\n      color: 'blue',\n      timeout: 3000,\n      position: 'bottomRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n  \n  export function showEmptyInput() {\n    iziToast.info({\n        timeout: 3000,\n        color: 'yellow',\n        position: 'bottomRight',\n        message: 'Please search for something',\n    });\n  }\n  \n  export function noMessage() {\n    iziToast.error({\n      title: 'Error',\n      timeout: 2000,\n      position: 'bottomRight',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nconst KEY = \"42660444-3b11bfb6c5a092fcbbd55e52b\";\nconst URL = \"https://pixabay.com/api/\";\n\nexport async function searchImages(currentQuery, currentPage) {\n  \n  const LINK = `${URL}?key=${KEY}&q=${currentQuery}&image_type=photo&orientation=horizontal&savesearch=true&page=${currentPage}&per_page=15`;\n\n  try {\n    const response = await axios.get(LINK);\n    return response.data;\n\n  } catch (error) {\n    console.error(`Error: ${error}`);\n  } \n}\n\n\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createMarkup, showEndOfListMessage, showEmptyInput, noMessage } from './js/render-functions.js';\nimport { searchImages } from './js/pixabay-api.js';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-btn');\n\nlet currentQuery;\nlet currentPage;\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSubmit(event) {\n  currentPage = 1;\n  event.preventDefault();\n  gallery.innerHTML = '';\n  currentQuery = form.elements.query.value.trim();\n  loadMoreBtn.style.display = 'block';\n\n  if (currentQuery === '') {\n    showEmptyInput();\n    gallery.innerHTML = '';\n    loadMoreBtn.style.display = 'none';\n    form.reset();\n    return;\n  }\n  loader.style.display = 'block';\n\n  try {\n    const images = await searchImages(currentQuery, currentPage).then(data => {\n      const markup = createMarkup(data);\n      if (data.hits.length === 0) {\n        noMessage();\n        loadMoreBtn.style.display = 'none';\n        loader.style.display = 'none';\n        return;\n      }\n      gallery.insertAdjacentHTML('beforeend', markup);\n      lightbox.refresh();\n      loader.style.display = 'none';\n    });\n  } catch (error) {\n    console.error('Error:', error);\n  }\n  form.reset();\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n  try {\n    const images = await searchImages(currentQuery, currentPage).then(data => {\n      const markup = createMarkup(data);\n      gallery.insertAdjacentHTML('beforeend', markup);\n      lightbox.refresh();\n\n      const cardHeight = gallery.getBoundingClientRect().height;\n      window.scrollBy({\n        top: 2 * cardHeight,\n        behavior: 'smooth',\n      });\n\n      if (data.hits.length <= 14) {\n        loadMoreBtn.style.display = 'none';\n        showEndOfListMessage();\n        lightbox.refresh();\n      }\n    });\n  } catch (error) {\n    console.error('Error:', error);\n  }\n}"],"names":["createMarkup","arr","largeImageURL","webformatURL","tags","likes","views","comments","downloads","showEndOfListMessage","iziToast","showEmptyInput","noMessage","KEY","URL","searchImages","currentQuery","currentPage","LINK","axios","error","lightbox","SimpleLightbox","form","gallery","loader","loadMoreBtn","onSubmit","onLoadMore","event","images","data","markup","cardHeight"],"mappings":"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"}